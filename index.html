<!DOCTYPE html>
<html lang="en">
<head>
<title>LAX Go to Market</title>
<link rel="stylesheet" type="text/css" href="css/css.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.1/d3.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>
</head>

<body role="document" ng-app="nhApp">
<div id="headerBar"></div>
  <div class="container-fluid theme-showcase" role="main">
    <div class="page-header">
      <h2 id="header-title">LAX Go To Market Progress</h2>
      <img id="header-img" src="http://www.northhighland.com/-/media/Images/NH/Content/Logo/nh_share_logo.jpg" alt="NH Logo" style="height: 50px; width: 200px; float: right;">
    </div>
    <div class="row">
      <div class="col-md-4 col-md-offset-2">
        <p class="inline" style="font-size: 16px; margin-bottom: 10px; margin-top: 10px">Above the Funnel Opportunities:</p>
        <span class="badge inline" style="font-size: 16px">24</span>
        <div id="chart">
        </div>
      </div>
      <div class="col-md-4">
      <div ng-controller="leaderboardController">
          <h4>Leaderboard:</h4>
          <ul class="list-group">
            <li class="list-group-item {{ leaders.class }}" ng-repeat="leaders in leaders"><span class="badge">{{ leaders.points }}</span>{{ leaders.name }}</li>
          </ul>
      </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        <div class="panel panel-primary">
          <div class="panel-heading">
            Short Cycle
          </div>
          <div class="panel-body">
          <h4>
          Dormant Accounts
          </h4>
          <div ng-controller="MainController">
            <form id="opportunityForm">
            <table id="shortCycleTable" class="table editable-table">
              <thead>
                <tr>
                  <th>Account</th>
                  <th>Leads</th>
                  <th>Last Contact</th>
                  <th>Opportunity</th>
                  <th>Opp Status</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr class="editable" ng-repeat="items in items">
                  <td class="editableField">{{ items.account }}</td>
                  <td class="editableField">{{ items.leads.join(', ') }}</td>
                  <td class="editableField">{{ items.lastContact | date:'longDate' }}</td>
                  <td class="editableField">{{ items.opportunity.name }}</td>
                  <td class="editableField">{{ items.opportunity.status }}</td>
                  <td class="rowControl">
                    <span class="glyphicon glyphicon-trash glyphicon-fade f_deleteRow"></span>
                    <span class="glyphicon glyphicon-pencil glyphicon-fade f_editRow"></span></td>
                </tr>
                <!-- This is our cloneable table line -->
                <tr id="dormAcctsForm" class="editable formRow">
                  <td>
                      <input type="text" id="account" placeholder="Account" class="form-control oppForm"/>
                      </td><td>
                      <input type="text" id="bdLeads" placeholder="BD Leads" class="form-control oppForm"/>
                      </td><td>
                      <input type="text" id="lastContact" placeholder="Date of Last Contact" class="form-control oppForm"/>
                      </td><td>
                      <input type="text" id="opportunity" placeholder="Opportunity Name" class="form-control oppForm"/>
                      </td><td>
                      <select class="form-control oppForm inline" id="status">
                        <option>Target</option>
                        <option>In progress</option>
                        <option>Submitted</option>
                        <option>Won</option>
                        <option>Lost</option>
                      </select>
                      <span class="glyphicon glyphicon-ok f_addOpp inline" id="addOpp"></span>
                      </td>
                </tr>
              </tbody>
            </table>
            </form>
            </div>
            <span class="label label-primary new-row-button" id="f_addNewRow">+</span>
            <span id="test" class="label label-primary">test</span>
          </div>
        </div>
      </div>
      </div>
      <div class="row">

      <div class="col-md-8 col-md-offset-2">
        <div class="panel panel-default">
          <div class="panel-heading">
            Long Cycle
          </div>
          <div class="panel-body">
          <h4> New Target Accounts</h4>
          <form id="longform">
            <table class="table editable-table">
              <thead>
                <tr>
                  <th>Account</th>
                  <th>Leads</th>
                  <th>Last Contact</th>
                  <th>Opportunity</th>
                  <th>Opp Status</th>
                </tr>
              </thead>
              <tbody>
                <tr class="editable">
                  <td class="editableField">AEG</td>
                  <td class="editableField">Peter, Maureen</td>
                  <td class="editableField">01/01/16</td>
                  <td class="editableField">Opportunity XYZ</td>
                  <td class="editableField">In Progress</span></td>
                  <td class="rowControl">
                    <span class="glyphicon glyphicon-trash glyphicon-fade f_deleteRow"></span>
                    <span class="glyphicon glyphicon-pencil glyphicon-fade f_editRow"></span></td>
                </tr>
                <tr class="editable">
                  <td class="editableField">AT&amp;T</td>
                  <td class="editableField">Reyes, Peter</td>
                  <td class="editableField">07/15/16</td>
                  <td class="editableField">Agent Answer Center ROI</td>
                  <td class="editableField">Proposal Submitted</span></td>
                  <td class="rowControl">
                    <span class="glyphicon glyphicon-trash glyphicon-fade f_deleteRow"></span>
                    <span class="glyphicon glyphicon-pencil glyphicon-fade f_editRow"></span></td>
                </tr>
                <tr class="editable" id="newAcctsForm">
                  <td>
                      <input type="text" id="newAccount" placeholder="Account" class="form-control oppForm"/>
                      </td><td>
                      <input type="text" id="newBdLeads" placeholder="BD Leads" class="form-control oppForm"/>
                      </td><td>
                      <input type="text" id="newLastContact" placeholder="Date of Last Contact" class="form-control oppForm"/>
                      </td><td>
                      <input type="text" id="newOpportunity" placeholder="Opportunity Name" class="form-control oppForm"/>
                      </td><td>
                      <select class="form-control oppForm inline" id="newStatus">
                        <option>Target</option>
                        <option>In progress</option>
                        <option>Submitted</option>
                        <option>Won</option>
                        <option>Lost</option>
                      </select>
                      <span class="glyphicon glyphicon-ok inline" id="f_dormAcctAdd"></span>
                      </td>
                </tr>
              </tbody>
            </table>
            </form>
            <span class="label label-default new-row-button" id="f_addNewAcctRow">+</span>
          </div>
        </div>
      </div>
      </div>
      </div>
  <script src="js/mindmup-editabletable.js"></script>   

  <!-- Modules -->

  <script src="js/app.js"></script>

  <!-- Controllers -->

  <script src="js/controllers/MainController.js"></script>
  <script src="js/controllers/leaderboardController.js"></script>

  <!-- Directives -->

  <script src="js/directives/opportunity.js"></script>

  <script>
  (function(d3) {

  // D3 donut chart experiment
var dataset = [
  { label: 'Late Stage', count: 2},
  { label: 'Mid Stage', count: 12},
  { label: 'Early Stage', count: 10},
];

var width = 120;
var height = 120;
var donutWidth = 30;
var radius = Math.min(width,height) / 2;

var color = d3.scaleOrdinal(d3.schemeCategory10);

var svg = d3.select('#chart')
  .append('svg')
  .attr('width', width)
  .attr('height', height)
  .attr('style', 'display: block; margin: auto')
  .append('g')
  .attr('transform', 'translate(' + (width/2) + ',' + (height/2) + ')');

var arc = d3.arc()
  .innerRadius(radius - donutWidth)
  .outerRadius(radius);

var pie = d3.pie()
  .value(function(d) { return d.count; })
  .sort(null);

var path = svg.selectAll('path')
  .data(pie(dataset))
  .enter()
  .append('path')
  .attr('d', arc)
  .attr('fill', function(d, i) {
    return color(d.data.label);
  });

  })(window.d3);

  </script>
  </body>
  </html>
